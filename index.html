<!DOCTYPE html>
<html lang="en">
<head>
  <title>Rubik's Cube</title>
  <script id="vertex-shader" type="x-shader/x-vertex">
    attribute vec4 vPosition;
    attribute vec4 vColor;
    varying vec4 fColor;
    
    uniform mat4 projectionMatrix;
    uniform mat4 modelViewMatrix;

    void main() {
        fColor = vColor;
        gl_Position = projectionMatrix * modelViewMatrix * vPosition;
    }
  </script>
  <script id="fragment-shader" type="x-shader/x-fragment">
    precision mediump float;
     
    varying vec4 fColor;
     
    void main () {
      gl_FragColor = fColor;
    }
  </script>
  <script type="text/javascript" src="./Common/MV.js"></script>
  <script type="text/javascript" src="./Common/webgl-utils.js"></script>
  <script type="text/javascript" src="./Common/initShaders.js"></script>
  <script type="text/javascript" src="./index.js"></script>

<head>
  <title>Weizhe Guo's Computer Graphic Project1 -- Rubik's Cube</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
</head>
<body>

<div class="container">
  <h1>Weizhe Guo's Computer Graphic Project1 -- Rubik's Cube</h1>
  <h2>Usage</h2>
  <p>- Click buttons below to select each face and the drop-down menu to select a direction. Left click the mouse and hold to rotate the cube. Scroll down/up to zoom in/ out. Refresh the page if you want to load a different cube status file.</p>
  <p>- The face is defined intuitively from the perspective looking at the cube. And the rotating direction of each face is from the perspective looking at the face. The center column, center row, and center faceâ€™s rotating directions are defined the same as the left, top and front faces, respectively.</p>
  
  <div class="btn-group">
    <button id = "Leftface" type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
    Left <span class="caret"></span></button>
    <ul class="dropdown-menu" role="menu">
    <button id = "LButton" type="button" class="btn btn-primary">Clockwise</button>
    <button id = "LiButton" type="button" class="btn btn-primary">Counterclockwise</button>
    </ul>
  </div>

  <div class="btn-group">
    <button id = "Rightface" type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
    Right <span class="caret"></span></button>
    <ul class="dropdown-menu" role="menu">
    <button id = "RButton" type="button" class="btn btn-primary">Clockwise</button>
    <button id = "RiButton" type="button" class="btn btn-primary">Counterclockwise</button>
    </ul>
  </div>

  <div class="btn-group">
    <button id = "Upperface" type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
    Upper <span class="caret"></span></button>
    <ul class="dropdown-menu" role="menu">
    <button id = "UButton" type="button" class="btn btn-primary">Clockwise</button>
    <button id = "UiButton" type="button" class="btn btn-primary">Counterclockwise</button>
    </ul>
  </div>

  <div class="btn-group">
    <button id = "Bottomface" type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
    Bottom <span class="caret"></span></button>
    <ul class="dropdown-menu" role="menu">
    <button id = "DButton" type="button" class="btn btn-primary">Clockwise</button>
    <button id = "DiButton" type="button" class="btn btn-primary">Counterclockwise</button>
    </ul>
  </div>

  <div class="btn-group">
    <button id = "Frontface" type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
    Front <span class="caret"></span></button>
    <ul class="dropdown-menu" role="menu">
    <button id = "FButton" type="button" class="btn btn-primary">Clockwise</button>
    <button id = "FiButton" type="button" class="btn btn-primary">Counterclockwise</button>
    </ul>
  </div>

  <div class="btn-group">
    <button id = "Rearface" type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
    Rear <span class="caret"></span></button>
    <ul class="dropdown-menu" role="menu">
    <button id = "BButton" type="button" class="btn btn-primary">Clockwise</button>
    <button id = "BiButton" type="button" class="btn btn-primary">Counterclockwise</button>
    </ul>
  </div>

  <div class="btn-group">
    <button id = "Centercolumn" type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
    CenterColumn <span class="caret"></span></button>
    <ul class="dropdown-menu" role="menu">
    <button id = "MButton" type="button" class="btn btn-primary">Clockwise</button>
    <button id = "MiButton" type="button" class="btn btn-primary">Counterclockwise</button>
    </ul>
  </div>

  <div class="btn-group">
    <button id = "Centerrow" type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
    CenterRow <span class="caret"></span></button>
    <ul class="dropdown-menu" role="menu">
    <button id = "EButton" type="button" class="btn btn-primary">Clockwise</button>
    <button id = "EiButton" type="button" class="btn btn-primary">Counterclockwise</button>
    </ul>
  </div>

  <div class="btn-group">
    <button id = "Centerface" type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
    CenterFace <span class="caret"></span></button>
    <ul class="dropdown-menu" role="menu">
    <button id = "SButton" type="button" class="btn btn-primary">Clockwise</button>
    <button id = "SiButton" type="button" class="btn btn-primary">Counterclockwise</button>
    </ul>
  </div>


<div style = "position: absolute;top:300px; left: 100px">
  <canvas id="gl-canvas" width="400" height="400">
    Oops, your browser doesn't support the HTML5 canvas element
  </canvas>
</div>
</div>
</body>
</html>
  
  <div id="FinishedField" style="width: 400px;position: absolute;top:650px; left: 720px;font-size: 30px;">
  </div>
  <div style="width: 400px;position: absolute;top:300px; left: 550px;">
    <form style="position: absolute; right: 0px;">
      Enter number of random turns (range 0-9999): <input style="width: 50px" type="text" id="randomTurnCount"><br>
    </form>
    <br/>
  <button id= "RandomButton" type="button" class="btn btn-primary" style="position: absolute;right: 25px; top: 50px;width:120px; height:50px;font-size: 15px;">Random</button>
  </div>
  <button id= "LoadButton" type="button" class="btn btn-primary" style="position: absolute; left: 720px; top: 450px;width:120px; height:50px;font-size: 15px;">Load</button>
  <button id= "SaveButton" type="button" class="btn btn-primary" style="position: absolute; left: 900px; top: 450px;width:120px; height:50px;font-size: 15px;">Save</button>
  <a download="CubeStatus.txt" href="" id="downloadlink" style="position: absolute; left : 620px; top:600px;"></a>
  <div id = "fileselect" style= "position:absolute;top: 520px; left: 720px;">
  <input type="file" id="files" name="files[]"/>
  <output id="list"></output>
  <script>
    function handleFileSelect(evt) {
    var files = evt.target.files;
      var reader = new FileReader();
      f = files[0];
      reader.onload = (function(theFile) {
        fileLoaded = true;
        return function(e) {
          fileContent = JSON.parse(reader.result);
          phivalue = fileContent.phival;
          thetavalue = fileContent.thetaval;
          cubeposition = fileContent.cubepos;
          var x, y, z;
          for (x = 0; x < 3; x++) {
            for (y = 0; y < 3; y++) {
              for (z = 0; z < 3; z++) {
                cubeposition[x][y][z][4].matrix = true;
              }
            }
          }
        }
      })(f);

      reader.readAsText(f);
    }

  document.getElementById('files').addEventListener('change', handleFileSelect, false);
  </script>
</body>
</html>